<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سبد خرید - مدرسه آنلاین</title>
    <!-- Bootstrap 5 RTL -->
    <link rel="stylesheet" href="CSS/bootstrap.rtl.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="CSS\main.css">
    <style>
        .course-card {
            transition: all 0.3s;
            border-radius: 10px;
        }
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .cart-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }
        .payment-card {
            border-radius: 15px;
            overflow: hidden;
        }
        .btn-primary {
            background-color: #4e73df;
            border-color: #4e73df;
        }
        .success-icon {
            font-size: 5rem;
            color: #28a745;
        }
        .error-icon {
            font-size: 5rem;
            color: #dc3545;
        }
        /* Filter Section Styles */
        .filter-section {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 30px;
        }
        .filter-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .filter-group {
            margin-bottom: 15px;
        }
        .filter-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        .filter-option {
            margin-bottom: 8px;
        }
        .filter-btn {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 5px 10px;
            margin-left: 5px;
            margin-bottom: 5px;
            font-size: 14px;
            transition: all 0.2s;
        }
        .filter-btn:hover, .filter-btn.active {
            background-color: #4e73df;
            color: white;
            border-color: #4e73df;
        }
        .price-range-slider {
            width: 100%;
            margin-top: 15px;
        }
        .price-range-values {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .reset-filters {
            color: #dc3545;
            cursor: pointer;
            font-size: 14px;
        }
        .reset-filters:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
          <div class="logo">هنرستان دانش </div>
          <nav class="navbar">
            <ul>
              <li><a href="panel.html">ورود / عضویت</a></li>
              <li><a href="proud2-page.html"> سبد خرید </a></li>
              <li><a href="about.html">درباره ما</a></li>
              <li><a href="call.html">تماس با ما</a></li>
              <li><a href="#">گالری تصاویر</a></li>
              <li>
                <a href="#">رشته‌ها</a>
                <ul>
                  <li><a href="#">شبکه و نرم افزار</a></li>
                  <li><a href="#">الکترونیک</a></li>
                  <li><a href="#">مکانیک</a></li>
                  <li><a href="#">برق</a></li>
                  <li><a href="#">گرافیک</a></li>
                </ul>
              </li>
              <li>
                <a href="#">خدمات</a>
                <ul>
                  <li><a href="singup.html">ثبت نام</a></li>
                  <li><a href="#">فیلم‌های آموزشی</a></li>
                  <li><a href="#">درباره اساتید</a></li>
                  <li><a href="#moshaver-sho">مشاوره</a></li>
                  <li><a href="#">آزمون‌ها</a></li>
                </ul>
              </li>
              <li><a href="main.HTML">خانه</a></li>
            </ul>
                        </nav>
        </div>
              </header>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Shopping Cart Page -->
        <div id="cart-page">
            <div class="row">
                <!-- Courses Column -->
                <div class="col-lg-8">
                    <!-- Filter Section -->
                    <div class="filter-section">
                        <div class="filter-header d-flex justify-content-between align-items-center">
                            <h4 class="mb-0">فیلتر محصولات</h4>
                            <span class="reset-filters" onclick="resetFilters()">
                                <i class="fas fa-redo me-1"></i>حذف فیلترها
                            </span>
                        </div>
                        
                        <div class="row">
                            <!-- Category Filter -->
                            <div class="col-md-4">
                                <div class="filter-group">
                                    <h5 class="filter-title">دسته بندی</h5>
                                    <div class="filter-options">
                                        <button class="filter-btn" onclick="filterByCategory('all')" data-category="all">همه دوره‌ها</button>
                                        <button class="filter-btn" onclick="filterByCategory('math')" data-category="math">ریاضی</button>
                                        <button class="filter-btn" onclick="filterByCategory('physics')" data-category="physics">فیزیک</button>
                                        <button class="filter-btn" onclick="filterByCategory('chemistry')" data-category="chemistry">شیمی</button>
                                        <button class="filter-btn" onclick="filterByCategory('consult')" data-category="consult">مشاوره</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Price Filter -->
                            <div class="col-md-4">
                                <div class="filter-group">
                                    <h5 class="filter-title">محدوده قیمت</h5>
                                    <input type="range" class="form-range price-range-slider" min="0" max="3000000" step="100000" value="3000000" id="priceRange">
                                    <div class="price-range-values">
                                        <span>0 تومان</span>
                                        <span id="maxPriceValue">3,000,000 تومان</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sort Filter -->
                            <div class="col-md-4">
                                <div class="filter-group">
                                    <h5 class="filter-title">مرتب سازی</h5>
                                    <select class="form-select" id="sortBy" onchange="sortCourses()">
                                        <option value="default">پیش فرض</option>
                                        <option value="price-asc">قیمت (کم به زیاد)</option>
                                        <option value="price-desc">قیمت (زیاد به کم)</option>
                                        <option value="name-asc">نام (الف-ی)</option>
                                        <option value="name-desc">نام (ی-الف)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="mb-4">دوره های آموزشی</h3>
                    <div class="row" id="courses-container">
                        <!-- Course 1 -->
                        <div class="col-md-6 mb-4 course-item" data-category="math" data-price="1500000">
                            <div class="card course-card h-100">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="ریاضی">
                                <div class="card-body">
                                    <h5 class="card-title">دوره آموزش ریاضی</h5>
                                    <p class="card-text">آموزش کامل ریاضیات پایه تا پیشرفته</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-success fw-bold">1,500,000 تومان</span>
                                        <button class="btn btn-sm btn-primary" onclick="addToCart('ریاضی', 1500000, 'math')">
                                            <i class="fas fa-cart-plus"></i> افزودن
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                                                
                        <!-- Course 2 -->
                        <div class="col-md-6 mb-4 course-item" data-category="physics" data-price="1200000">
                            <div class="card course-card h-100">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="فیزیک">
                                <div class="card-body">
                                    <h5 class="card-title">دوره آموزش فیزیک</h5>
                                    <p class="card-text">آموزش مفهومی فیزیک با حل مسائل</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-success fw-bold">1,200,000 تومان</span>
                                        <button class="btn btn-sm btn-primary" onclick="addToCart('فیزیک', 1200000, 'physics')">
                                            <i class="fas fa-cart-plus"></i> افزودن
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                                                
                        <!-- Course 3 -->
                        <div class="col-md-6 mb-4 course-item" data-category="consult" data-price="2000000">
                            <div class="card course-card h-100">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="مشاوره">
                                <div class="card-body">
                                    <h5 class="card-title">مشاوره تحصیلی</h5>
                                    <p class="card-text">برنامه ریزی تحصیلی شخصی سازی شده</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-success fw-bold">2,000,000 تومان</span>
                                        <button class="btn btn-sm btn-primary" onclick="addToCart('مشاوره', 2000000, 'consult')">
                                            <i class="fas fa-cart-plus"></i> افزودن
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                                                
                        <!-- Course 4 -->
                        <div class="col-md-6 mb-4 course-item" data-category="chemistry" data-price="1300000">
                            <div class="card course-card h-100">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="شیمی">
                                <div class="card-body">
                                    <h5 class="card-title">دوره آموزش شیمی</h5>
                                    <p class="card-text">آموزش شیمی با آزمایش های جذاب</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-success fw-bold">1,300,000 تومان</span>
                                        <button class="btn btn-sm btn-primary" onclick="addToCart('شیمی', 1300000, 'chemistry')">
                                            <i class="fas fa-cart-plus"></i> افزودن
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                                
                <!-- Cart Column -->
                <div class="col-lg-4">
                    <div class="card shadow-sm sticky-top" style="top: 20px;">
                        <div class="card-header bg-white">
                            <h4 class="mb-0">سبد خرید شما</h4>
                        </div>
                        <div class="card-body">
                            <div id="cart-items">
                                <!-- Empty cart message -->
                                <div class="text-center py-3" id="empty-cart-message">
                                    <i class="fas fa-shopping-cart fa-2x text-muted mb-3"></i>
                                    <p class="text-muted">سبد خرید شما خالی است</p>
                                </div>
                            </div>
                                                        
                            <hr>
                                                        
                            <!-- Order Summary -->
                            <div class="mb-3">
                                <h5>خلاصه سفارش</h5>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>جمع کل:</span>
                                    <span id="cart-subtotal">0 تومان</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>تخفیف:</span>
                                    <span class="text-success" id="cart-discount">0 تومان</span>
                                </div>
                                <div class="d-flex justify-content-between fw-bold mb-3">
                                    <span>مبلغ قابل پرداخت:</span>
                                    <span id="cart-total">0 تومان</span>
                                </div>
                            </div>
                                                        
                            <!-- Checkout Form -->
                            <form id="checkout-form">
                                <div class="mb-3">
                                    <label class="form-label">نام کامل</label>
                                    <input type="text" class="form-control" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">شماره تماس</label>
                                    <input type="tel" class="form-control" required>
                                </div>
                                                                
                                <button type="button" class="btn btn-primary w-100" onclick="processPayment()" id="checkout-btn" disabled>
                                    پرداخت نهایی
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                
        <!-- Payment Success Page (Hidden by default) -->
        <div id="success-page" class="text-center py-5" style="display: none;">
            <div class="success-icon mb-4">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="mb-3">پرداخت با موفقیت انجام شد!</h2>
            <p class="mb-4">سفارش شما ثبت شد و جزئیات به ایمیل شما ارسال خواهد شد.</p>
            <a href="cart.html" class="btn btn-primary">
                بازگشت به سبد خرید
            </a>
        </div>
                
        <!-- Payment Failed Page (Hidden by default) -->
        <div id="failed-page" class="text-center py-5" style="display: none;">
            <div class="error-icon mb-4">
                <i class="fas fa-times-circle"></i>
            </div>
            <h2 class="mb-3">پرداخت ناموفق بود!</h2>
            <p class="mb-4">در صورت کسر مبلغ از حساب شما، طی 72 ساعت برگشت خواهد خورد.</p>
            <button class="btn btn-primary" onclick="showCartPage()">
                تلاش مجدد
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="danesh-footer" dir="rtl">
        <div class="container py-5">
          <div class="row gx-5">
                <!-- درباره ما -->
                <div class="col-lg-4 col-md-4 mb-4">
                  <div class="footer-section footer-section-about">
                    <h4 class="footer-heading" style="color: #ffffff;">
                      مدرسه دانش
                    </h4>
                    <p class=" mt-3" style="color: #ffffff;">
                      هنرستان دانش با بیش از نیم قرن تجربه همواره در تلاش پرورش آینده سازان ایران زمین است . این هنرستان از سال 1351 در حال کار است و حرف هایی برای خود دارد . این هنرستان در جمع 5 هنرستان نمونه دولتی کشوری است و در بین هنرستان های قم رتبه اول استان را دارد                     </p>
                    <div class="social-icons mt-4">
                      <a href="#" class="text-decoration-none me-3">
                        <i class="fab fa-linkedin" style="color: #ffffff;"></i>
                      </a>
                      <a href="#" class="text-decoration-none me-3">
                        <i class="fab fa-telegram" style="color: #ffffff;"></i>
                      </a>
                      <a href="#" class="text-decoration-none">
                        <i class="fab fa-instagram" style="color: #ffffff;"></i>
                      </a>
                    </div>
                  </div>
                </div>
                       
                <!-- لینک‌های مفید -->
            <div class="col-lg-2 col-md-4 mb-4">
              <div class="footer-section">
                <h4 class="footer-heading" style="color: #ffffff;">
                  لینک‌های مفید
                </h4>
                <ul class="list-unstyled mt-3">
                  <li class="mb-2">
                    <a href="main.HTML" class="footer-link" style="color: #ffffff;">خانه </a>
                  </li>
                  <li class="mb-2">
                    <a href="#" class="footer-link" style="color: #ffffff;"> گالری تصاویر</a>
                  </li>
                  <li class="mb-2">
                    <a href="#" class="footer-link" style="color: #ffffff;">تماس با ما</a>
                  </li>
                  <li class="mb-2">
                    <a href="#" class="footer-link" style="color: #ffffff;">درباره ما</a>
                  </li>
                </ul>
              </div>
            </div>
                         
                <!-- محصولات -->
                    <div class="col-lg-2 col-md-4 mb-4">
                      <div class="footer-section">
                        <h4 class="footer-heading" style="color: #ffffff;">
                          رشته ها
                        </h4>
                        <ul class="list-unstyled mt-3">
                          <li class="mb-2">
                            <a href="#" class="footer-link" style="color: #ffffff;">برق</a>
                          </li>
                          <li class="mb-2">
                            <a href="#" class="footer-link" style="color: #ffffff;">کامپیوتر</a>
                          </li>
                          <li class="mb-2">
                            <a href="#" class="footer-link" style="color: #ffffff;">گرافیک </a>
                          </li>
                          <li class="mb-2">
                            <a href="#" class="footer-link" style="color: #ffffff;">الکترونیک</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                 
                <!-- تماس با ما -->
            <div class="col-lg-4 mb-4">
              <div class="footer-section pe-4">
                <h4 class="footer-heading" style="color: #ffffff;">
                  تماس با مدرسه ما
                </h4>
                <div class="footer-content mt-3">
                  <p style="color: #ffffff;">
                  تهران، مطهری، خیابان شریعتی، ابتدای خیابان صدر، پلاک ۱۲۵
                  </p>
                  <p  style="color: #ffffff;">
                    09117415006
                  </p>
                </div>
              </div>
            </div>
          </div>
               
                <!-- خط تقسیم -->
          <hr class="footer-divider" style="border-color: rgba(255,255,255,0.2);">
               
                <!-- کپی رایت -->
          <div class="row">
            <div class="col-12 text-center">
              <p class="copyright-text" style="color: #ffffff;">
                کلیه حقوق مادی و معنوی متعلق به
                <span style="color: #ffffff;"> مدرسه دانش </span>
                © ۱۴۰۲ می‌باشد
              </p>
            </div>
          </div>
        </div>
      </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        
    <script>
        // Cart data
        let cart = [];
        
        // Add item to cart
        function addToCart(name, price, id) {
            // Check if item already exists
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: id,
                    name: name,
                    price: price,
                    quantity: 1
                });
            }
            
            updateCart();
            
            // Show alert
            alert(`${name} به سبد خرید اضافه شد!`);
        }
        
        // Update cart display
        function updateCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            if (cart.length === 0) {
                // Show empty cart message
                document.getElementById('empty-cart-message').style.display = 'block';
                checkoutBtn.disabled = true;
            } else {
                // Hide empty cart message
                document.getElementById('empty-cart-message').style.display = 'none';
                                
                // Generate cart items HTML
                let cartItemsHTML = '';
                let subtotal = 0;
                
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    
                    cartItemsHTML += `
                        <div class="cart-item">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6>${item.name}</h6>
                                    <small class="text-muted">${formatPrice(item.price)}</small>
                                </div>
                                <span class="fw-bold">${formatPrice(itemTotal)}</span>
                            </div>
                            <div class="d-flex justify-content-between mt-2">
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary" onclick="updateQuantity('${item.id}', -1)">-</button>
                                    <button class="btn btn-outline-secondary" disabled>${item.quantity}</button>
                                    <button class="btn btn-outline-secondary" onclick="updateQuantity('${item.id}', 1)">+</button>
                                </div>
                                <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart('${item.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                cartItemsContainer.innerHTML = cartItemsHTML;
                
                // Calculate totals
                const discount = 0; // Can add discount logic here
                const total = subtotal - discount;
                
                // Update totals
                document.getElementById('cart-subtotal').textContent = formatPrice(subtotal);
                document.getElementById('cart-discount').textContent = formatPrice(discount);
                document.getElementById('cart-total').textContent = formatPrice(total);
                
                // Enable checkout button
                checkoutBtn.disabled = false;
            }
        }
        
        // Update item quantity
        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            
            if (item) {
                item.quantity += change;
                
                // Remove if quantity is 0 or less
                if (item.quantity <= 0) {
                    cart = cart.filter(item => item.id !== id);
                }
                
                updateCart();
            }
        }
        
        // Remove item from cart
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCart();
        }
        
        // Process payment
        function processPayment() {
            // Validate form
            const form = document.getElementById('checkout-form');
            const inputs = form.querySelectorAll('input[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.classList.add('is-invalid');
                    isValid = false;
                } else {
                    input.classList.remove('is-invalid');
                }
            });
            
            if (!isValid) {
                alert('لطفا تمام فیلدهای ضروری را تکمیل نمایید.');
                return;
            }
            
            // Simulate payment (80% success rate)
            const isSuccess = Math.random() < 0.8;
            
            if (isSuccess) {
                // Show success page
                document.getElementById('cart-page').style.display = 'none';
                document.getElementById('success-page').style.display = 'block';
                
                // Clear cart
                cart = [];
            } else {
                // Show failed page
                document.getElementById('cart-page').style.display = 'none';
                document.getElementById('failed-page').style.display = 'block';
            }
        }
        
        // Show cart page (from success/failed pages)
        function showCartPage() {
            document.getElementById('cart-page').style.display = 'block';
            document.getElementById('success-page').style.display = 'none';
            document.getElementById('failed-page').style.display = 'none';
        }
        
        // Format price with commas
        function formatPrice(price) {
            return new Intl.NumberFormat('fa-IR').format(price) + ' تومان';
        }
        
        // Filter functions
        let currentCategory = 'all';
        let currentMaxPrice = 3000000;
        
        // Filter by category
        function filterByCategory(category) {
            currentCategory = category;
            
            // Update active button
            document.querySelectorAll('[data-category]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            applyFilters();
        }
        
        // Filter by price range
        document.getElementById('priceRange').addEventListener('input', function() {
            currentMaxPrice = parseInt(this.value);
            document.getElementById('maxPriceValue').textContent = formatPrice(currentMaxPrice);
            applyFilters();
        });
        
        // Sort courses
        function sortCourses() {
            const sortBy = document.getElementById('sortBy').value;
            const coursesContainer = document.getElementById('courses-container');
            const courses = Array.from(document.querySelectorAll('.course-item'));
            
            courses.sort((a, b) => {
                const priceA = parseInt(a.getAttribute('data-price'));
                const priceB = parseInt(b.getAttribute('data-price'));
                const nameA = a.querySelector('.card-title').textContent;
                const nameB = b.querySelector('.card-title').textContent;
                
                switch(sortBy) {
                    case 'price-asc':
                        return priceA - priceB;
                    case 'price-desc':
                        return priceB - priceA;
                    case 'name-asc':
                        return nameA.localeCompare(nameB, 'fa');
                    case 'name-desc':
                        return nameB.localeCompare(nameA, 'fa');
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted courses
            courses.forEach(course => {
                coursesContainer.appendChild(course);
            });
        }
        
        // Apply all filters
        function applyFilters() {
            const courses = document.querySelectorAll('.course-item');
            
            courses.forEach(course => {
                const courseCategory = course.getAttribute('data-category');
                const coursePrice = parseInt(course.getAttribute('data-price'));
                
                const categoryMatch = currentCategory === 'all' || courseCategory === currentCategory;
                const priceMatch = coursePrice <= currentMaxPrice;
                
                if (categoryMatch && priceMatch) {
                    course.style.display = 'block';
                } else {
                    course.style.display = 'none';
                }
            });
        }
        
        // Reset all filters
        function resetFilters() {
            currentCategory = 'all';
            currentMaxPrice = 3000000;
            
            // Reset category buttons
            document.querySelectorAll('[data-category]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('[data-category="all"]').classList.add('active');
            
            // Reset price slider
            document.getElementById('priceRange').value = 3000000;
            document.getElementById('maxPriceValue').textContent = formatPrice(3000000);
            
            // Reset sort
            document.getElementById('sortBy').value = 'default';
            
            // Apply filters
            applyFilters();
        }
        
        // Initialize cart and filters on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCart();
            
            // Set default active category
            document.querySelector('[data-category="all"]').classList.add('active');
        });
    </script>
</body>
</html>